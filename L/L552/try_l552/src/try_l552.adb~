with HAL;            use HAL;
with STM32_SVD.RCC;  use STM32_SVD.RCC;
with STM32_SVD.RNG;  use STM32_SVD.RNG;

with System;

procedure Try_l552
is
   X : UInt32;
   Cr : RNG_CR_Register;
   for X'Address use Cr'Address;
   Y : UInt32
     with Address => System'To_Address (16#520C0800#);
   Z : System.Address := SEC_RNG_Periph.RNG_DR'Address;
   Rval : UInt32;
   for Rval'Address use Z;

begin
   SEC_RCC_Periph.AHB2ENR.RNGEN := True;
   Cr.RNG_CONFIG1 := 8;
   Cr.RNG_CONFIG3 := 16#D#;
   Cr.CONDRST := True;
   Cr.CED := True;
   Y := X;
   SEC_RNG_Periph.RNG_CR.CONDRST := False;
   loop
      exit when not SEC_RNG_Periph.RNG_CR.CONDRST;
   end loop;

   SEC_RNG_Periph.RNG_CR.RNGEN := True;

   loop
      null;
   end loop;
end Try_l552;
